(function(){var K,R,r=480,I=["hunger","health","sanity"],qa={hunger:!0,health:!0,sanity:!0},ra={bestHunger:!0,bestHealth:!0,bestSanity:!0},m=1*r,q=3*r,k=6*r,g=10*r,u=15*r,D=20*r,H=40*r,n=2*r,sa=r/16*.6666,S={raw:1,dried:1,cooked:1,recipe:1},F=S,Y=[],z=7,x={vanilla:{name:"Vanilla",img:"vanilla.png",bit:1,mask:1,color:"#ff592e"},giants:{name:"Reign of Giants",img:"reign_of_giants.png",bit:2,mask:3,color:"#b857c6"},shipwrecked:{name:"Shipwrecked",img:"shipwrecked.png",bit:4,mask:7,color:"#50c1cc"},together:{name:"Don't Starve Together",
img:"together.png",bit:8,mask:11,color:"#c0c0c0"},warly:{name:"Warly",img:"warly.png",bit:16,mask:23,multipliers:{raw:.7,dried:.8,cooked:.9,recipe:1.2}}},W=function(a){F={};for(d in S)S.hasOwnProperty(d)&&(F[d]=S[d]);z=a;for(var d=0;d<M.childNodes.length;d++){a=M.childNodes[d];var b=x[a.dataset.mode];a.className=0!==(z&b.bit)?"enabled":"";if(b.multipliers&&0!==(z&b.bit))for(var c in b.multipliers)b.multipliers.hasOwnProperty(c)&&(F[c]*=b.multipliers[c])}for(d=0;d<Y.length;d++)Y[d]();c=["together",
"shipwrecked","giants","vanilla"];for(d=0;d<c.length;d++)if(0!==(z&x[c[d]].bit)){document.getElementsByTagName("BODY")[0].style["background-color"]=x[c[d]].color;break}},l={acorn:{name:"Birchnut",uncookable:!0,hunger:9.375,health:1,sanity:0,perish:D,stack:40,mode:"giants"},acorn_cooked:{name:"Roasted Birchnut",ideal:!0,seed:1,hunger:9.375,health:1,sanity:0,perish:k,stack:40,mode:"giants"},butter:{name:"Butter",fat:1,dairy:1,health:40,hunger:25,sanity:0,perish:H,stack:40},butterflywings:{name:"Butterfly Wings",
isveggie:!0,decoration:2,health:8,hunger:9.375,sanity:0,perish:k,stack:40},cactusflower:{name:"Cactus Flower",veggie:.5,hunger:12.5,health:8,sanity:5,perish:q,stack:40,mode:"giants"},deerclopseyeball:{name:"Deerclops Eyeball",uncookable:!0,health:60,hunger:75,sanity:-15},bird_egg:{name:"Egg",egg:1,health:0,hunger:9.375,sanity:0,perish:g,stack:40,rot:"rottenegg"},bird_egg_cooked:{name:"Cooked Egg",egg:1,precook:1,health:0,hunger:12.5,sanity:0,perish:k,stack:40},rottenegg:{name:"Rotten Egg",uncookable:!0,
health:-1,hunger:-10,sanity:0,stack:40},cutlichen:{name:"Lichen",isveggie:!0,veggie:1,health:3,hunger:12.5,sanity:-5,perish:2*r},eel:{name:"Eel",ismeat:!0,meat:.5,fish:1,health:3,hunger:9.375,sanity:0,perish:q,stack:40,dry:"morsel_dried",drytime:r},eel_cooked:{name:"Cooked Eel",ismeat:!0,health:8,hunger:12.5,sanity:0,perish:k,stack:40},fish:{name:"Fish",ismeat:!0,meat:.5,fish:1,health:1,hunger:12.5,sanity:0,perish:q,stack:40,drytime:r,dry:"morsel_dried"},fish_cooked:{name:"Cooked Fish",ismeat:!0,
meat:.5,fish:1,precook:1,health:1,hunger:12.5,sanity:0,perish:k,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:.5,health:0,hunger:12.5,perish:k,sanity:-10,stack:40},froglegs_cooked:{name:"Cooked Frog Legs",ismeat:!0,meat:.5,precook:1,health:1,hunger:12.5,perish:g,sanity:0,stack:40},foliage:{name:"Foliage",uncookable:!0,health:1,hunger:0,sanity:0,perish:k,stack:40},goatmilk:{name:"Electric Milk",dairy:1,health:3,hunger:12.5,sanity:10,perish:k,stack:40,mode:"giants"},honey:{name:"Honey",sweetener:!0,
health:3,hunger:9.375,sanity:0,perish:H,stack:40},honeycomb:{name:"Honeycomb",sweetener:!0},ice:{name:"Ice",frozen:1,health:.5,hunger:2.34375,sanity:0,perish:q,stack:40,mode:"giants"},lightbulb:{name:"Light Bulb",health:1,hunger:0,sanity:0,perish:k,stack:40,uncookable:!0},mandrake:{name:"Mandrake",veggie:1,magic:1,health:60,hunger:75,sanity:0,stack:40},mandrake_cooked:{name:"Cooked Mandrake",uncookable:!0,veggie:1,magic:1,precook:1,health:100,hunger:150,sanity:0,stack:40},mole:{name:"Moleworm",ideal:!0,
meat:.5,perish:2*r,cook:"morsel_cooked",mode:"giants"},plantmeat:{name:"Leafy Meat",uncookable:!0,health:0,hunger:12.5,sanity:-10,perish:k,stack:40},plantmeat_cooked:{name:"Cooked Leafy Meat",uncookable:!0,health:1,hunger:18.75,sanity:0,perish:g,stack:40},monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,health:-20,hunger:18.75,sanity:-15,perish:k,stack:20,dry:"monstermeat_dried",drytime:r},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,precook:1,health:-3,hunger:18.75,
sanity:-10,perish:u,stack:20},monstermeat_dried:{name:"Monster Jerky",ismeat:!0,meat:1,monster:!0,dried:1,health:-3,hunger:18.75,sanity:-5,perish:D,stack:20},meat:{name:"Meat",ismeat:!0,meat:1,health:1,hunger:25,sanity:-10,perish:k,stack:20,dry:"meat_dried",drytime:n},meat_cooked:{name:"Cooked Meat",ismeat:!0,meat:1,precook:1,health:3,hunger:25,sanity:0,perish:g,stack:20},meat_dried:{name:"Jerky",ismeat:!0,meat:1,dried:1,health:20,hunger:25,sanity:15,perish:D,stack:20},morsel:{name:"Morsel",ismeat:!0,
meat:.5,health:0,hunger:12.5,sanity:-10,perish:k,stack:40,drytime:r,dry:"morsel_dried"},morsel_cooked:{name:"Cooked Morsel",raw:"morsel",ismeat:!0,meat:.5,precook:1,health:1,hunger:12.5,sanity:0,perish:g,stack:40},morsel_dried:{name:"Small Jerky",wet:"morsel",ismeat:!0,meat:.5,dried:1,health:8,hunger:12.5,sanity:10,perish:D,stack:40},drumstick:{name:"Drumstick",ismeat:!0,ideal:!0,meat:.5,health:0,hunger:12.5,sanity:-10,perish:k,stack:20,drytime:r,dry:"morsel_dried"},drumstick_cooked:{name:"Fried Drumstick",
ismeat:!0,meat:.5,precook:1,health:1,hunger:12.5,sanity:0,perish:g,stack:20},batwing:{name:"Batilisk Wing",ismeat:!0,health:3,hunger:12.5,sanity:-10,perish:k,stack:40,drytime:n,dry:"morsel_dried",uncookable:!0},batwing_cooked:{name:"Cooked Batilisk Wing",ismeat:!0,health:8,hunger:18.75,sanity:0,perish:g,uncookable:!0},minotaurhorn:{name:"Guardian's Horn",uncookable:!0,ismeat:!0,health:60,hunger:75,sanity:-15},red_mushroom:{name:"Red Cap",basename:"CapRed",veggie:.5,ideal:!0,health:-20,hunger:12.5,
sanity:0,perish:g,stack:40},red_mushroom_cooked:{name:"Cooked Red Cap",veggie:.5,health:1,hunger:0,sanity:-10,perish:g,stack:40},green_mushroom:{name:"Green Cap",basename:"CapGreen",veggie:.5,ideal:!0,health:0,hunger:12.5,sanity:-50,perish:g,stack:40},green_mushroom_cooked:{name:"Cooked Green Cap",veggie:.5,health:-1,hunger:0,sanity:15,perish:g,stack:40},blue_mushroom:{name:"Blue Cap",basename:"CapBlue",veggie:.5,ideal:!0,health:20,hunger:12.5,sanity:-15,perish:g,stack:40},blue_mushroom_cooked:{name:"Cooked Blue Cap",
veggie:.5,health:-3,hunger:0,sanity:10,perish:g,stack:40},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:0,perish:k,stack:40},petals_evil:{name:"Dark Petals",basename:"Petals.",uncookable:!0,health:0,hunger:0,sanity:-5,perish:k,stack:40},seeds:{name:"Seeds",uncookable:!0,health:0,hunger:4.6875,sanity:0,perish:H,stack:40},seeds_cooked:{name:"Toasted Seeds",uncookable:!0,health:1,hunger:4.6875,sanity:0,perish:g,stack:40},spoiled_food:{name:"Rot",uncookable:!0,health:-1,hunger:-10,sanity:0,
stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:3,hunger:25,sanity:0},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,precook:1,health:0,hunger:37.5,sanity:0,perish:k},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,ismeat:!0,health:30,hunger:37.5,sanity:0,perish:k,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:40,hunger:75,sanity:0,perish:u,stack:20},twigs:{name:"Twigs",inedible:1},cavebanana:{name:"Banana",ideal:!0,isfruit:!0,fruit:1,health:1,
hunger:12.5,sanity:0,perish:g},cavebanana_cooked:{name:"Cooked Banana",isfruit:!0,fruit:1,precook:1,health:3,hunger:12.5,sanity:0,perish:k},carrot:{name:"Carrot",isveggie:!0,veggie:1,health:1,hunger:12.5,perish:g,sanity:0,stack:40},carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:k,sanity:0,stack:40},corn:{name:"Corn",ideal:!0,isveggie:!0,veggie:1,health:3,hunger:25,perish:g,sanity:0,stack:40},corn_cooked:{name:"Popcorn",isveggie:!0,veggie:1,precook:1,
health:3,hunger:12.5,perish:u,sanity:0,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:3,hunger:37.5,perish:g,sanity:0,stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,precook:1,health:8,hunger:37.5,perish:k,sanity:0,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:8,hunger:25,perish:g,sanity:0,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,precook:1,health:20,hunger:25,perish:k,sanity:0,stack:20},durian:{name:"Durian",isfruit:!0,
monster:1,fruit:1,health:-3,hunger:25,perish:g,sanity:-5,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,fruit:1,precook:1,health:0,hunger:25,perish:k,sanity:-5,stack:20},pomegranate:{name:"Pomegranate",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:k,sanity:0,stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:q,sanity:0,stack:40},dragonfruit:{name:"Dragon Fruit",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:k,
sanity:0,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:q,sanity:0,stack:40},berries:{name:"Berries",isfruit:!0,fruit:.5,health:0,hunger:9.375,perish:k,sanity:0,stack:40},berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:.5,precook:1,health:1,hunger:12.5,perish:q,sanity:0,stack:40},cactusmeat:{name:"Cactus Flesh",ideal:!0,veggie:1,hunger:12.5,health:-3,perish:g,sanity:-5,stack:40,mode:"giants"},cactusmeat_cooked:{name:"Cooked Cactus Flesh",
veggie:1,hunger:12.5,health:1,perish:g,sanity:15,precook:1,stack:40,mode:"giants"},watermelon:{name:"Watermelon",fruit:1,ideal:!0,hunger:12.5,health:3,perish:k,sanity:5,stack:40,mode:"giants"},watermelon_cooked:{name:"Grilled Watermelon",fruit:1,hunger:12.5,health:1,perish:q,sanity:7.5,precook:1,stack:40,mode:"giants"},wormlight:{name:"Glow Berry",uncookable:!0,health:11,hunger:18.75,sanity:-10,perish:g,note:"Gives 90 seconds of light"},glommerfuel:{name:"Glommer's Goop",uncookable:!0,health:40,hunger:9.375,
sanity:-50,mode:"giants"},coral_brain:{name:"Brainy Matter",uncookable:!0,health:-10,hunger:10,sanity:50,perish:m,mode:"shipwrecked"},blubber:{name:"Blubber",uncookable:!0,health:10,hunger:10,sanity:0,perish:g,stack:10,mode:"shipwrecked"},seaweed:{name:"Seaweed",ideal:!0,veggie:1,health:1,hunger:9.375,sanity:-10,perish:k,stack:40,dry:"seaweed_dried",drytime:r,mode:"shipwrecked"},seaweed_cooked:{name:"Roasted Seaweed",veggie:1,health:3,hunger:9.375,sanity:0,perish:g,stack:40,mode:"shipwrecked"},seaweed_dried:{name:"Dried Seaweed",
veggie:1,health:3,hunger:12.5,sanity:0,perish:D,stack:40,mode:"shipwrecked"},sweet_potato:{name:"Sweet Potato",veggie:1,health:1,hunger:12.5,sanity:0,perish:g,stack:40,mode:"shipwrecked"},sweet_potato_cooked:{name:"Cooked Sweet Potato",veggie:1,health:3,hunger:12.5,sanity:0,perish:k,stack:40,mode:"shipwrecked"},coffeebeans:{name:"Coffee Beans",fruit:.5,health:0,hunger:9.375,sanity:0,perish:k,stack:40,mode:"shipwrecked"},coffeebeans_cooked:{name:"Roasted Coffee Beans",ideal:!0,fruit:1,health:0,hunger:9.375,
sanity:-5,perish:u,stack:40,note:"Gives 5 bonus speed (+83%) for 30 seconds",mode:"shipwrecked"},coconut_halved:{name:"Halved Coconut",basename:"Coconut.",fruit:1,fat:1,health:1,hunger:4.6875,sanity:0,perish:g,stack:40,cook:"coconut_cooked",mode:"shipwrecked"},coconut_cooked:{name:"Roasted Coconut",fruit:1,fat:1,health:1,hunger:9.375,sanity:0,perish:g,stack:40,mode:"shipwrecked"},doydoyegg:{name:"Doydoy Egg",egg:1,health:3,hunger:25,sanity:0,perish:g,mode:"shipwrecked"},doydoyegg_cooked:{name:"Fried Doydoy Egg",
egg:1,health:0,hunger:37.5,sanity:0,perish:k,mode:"shipwrecked"},tropical_fish:{name:"Tropical Fish",skip:!0,ismeat:!0,meat:.5,fish:1,health:1,hunger:12.5,sanity:0,perish:q,stack:40,cook:"fish_raw_small_cooked",dry:"morsel_dried",drytime:r,mode:"shipwrecked"},fish_raw:{name:"Raw Fish",meat:.5,fish:1,health:1,hunger:25,sanity:0,perish:q,stack:40,cook:"fish_med_cooked",dry:"meat_dried",drytime:r,mode:"shipwrecked"},fish_med:{name:"Dead Dogfish",meat:.5,fish:1,health:1,hunger:25,sanity:0,perish:k,stack:40,
rot:"spoiled_fish",dry:"meat_dried",drytime:r,mode:"shipwrecked"},dead_swordfish:{name:"Swordfish",uncookable:!0,health:1,hunger:25,sanity:0,perish:k,stack:40,cook:"fish_med_cooked",rot:"spoiled_fish",dry:"meat_dried",drytime:r,mode:"shipwrecked"},fish_med_cooked:{name:"Fish Steak",meat:.5,fish:1,health:20,hunger:25,sanity:0,perish:k,stack:40,mode:"shipwrecked"},shark_fin:{name:"Shark Fin",meat:.5,fish:1,health:20,hunger:25,sanity:-15,perish:k,stack:10,mode:"shipwrecked"},limpets:{name:"Limpets",
ideal:!0,fish:.5,health:0,hunger:12.5,sanity:-10,perish:k,stack:40,mode:"shipwrecked"},limpets_cooked:{name:"Cooked Limpets",fish:.5,health:1,hunger:12.5,sanity:0,perish:g,stack:40,mode:"shipwrecked"},mussel:{name:"Mussel",fish:.5,health:0,hunger:12.5,sanity:-10,perish:q,stack:40,mode:"shipwrecked"},mussel_cooked:{name:"Cooked Mussel",fish:.5,health:1,hunger:12.5,sanity:0,perish:q,stack:40,mode:"shipwrecked"},mysterymeat:{name:"Bile-Covered Slop",uncookable:!0,health:-1,hunger:-10,sanity:0,stack:20,
mode:"shipwrecked"},jellyfish:{name:"Jellyfish",fish:1,jellyfish:1,monster:1,perish:1.5*m,stack:40,mode:"shipwrecked"},jellyfish_dead:{name:"Dead Jellyfish",basename:"Jellyfish.",fish:1,jellyfish:1,monster:1,health:10,hunger:10,sanity:0,perish:k,stack:20,cook:"jellyfish_cooked",dry:"jellyfish_dried",drytime:r,mode:"shipwrecked"},jellyfish_cooked:{name:"Cooked Jellyfish",fish:1,jellyfish:1,monster:1,health:10,hunger:18.75,sanity:0,perish:g,stack:20,mode:"shipwrecked"},jellyfish_dried:{name:"Dried Jellyfish",
fish:1,jellyfish:1,monster:1,health:10,hunger:18.75,sanity:0,perish:D,stack:20,mode:"shipwrecked"},lobster:{name:"Wobster",fish:2,perish:2*r,mode:"shipwrecked"},lobster_dead:{name:"Dead Wobster",basename:"Wobster.",uncookable:!0,health:1,hunger:12.5,sanity:0,perish:q,stack:10,cook:"lobster_cooked",mode:"shipwrecked"},lobster_cooked:{name:"Delicious Wobster",uncookable:!0,health:1,hunger:12.5,sanity:0,perish:k,stack:40,mode:"shipwrecked"},crab:{name:"Crab",skip:!0,fish:.5,perish:2*r,cook:"fish_raw_small_cooked",
mode:"shipwrecked"},fish_raw_small:{name:"Fish Morsel",fish:.5,health:1,hunger:12.5,perish:q,sanity:0,stack:40,dry:"morsel_dried",drytime:r,mode:"shipwrecked"},fish_raw_small_cooked:{name:"Cooked Fish Morsel",fish:.5,health:1,hunger:12.5,sanity:0,perish:k,stack:40,mode:"shipwrecked"},tigereye:{name:"Eye of the Tiger Shark",uncookable:!0,health:60,hunger:75,sanity:-15,stack:10,mode:"shipwrecked"},dragoonheart:{name:"Dragoon Heart",uncookable:!0,health:11,hunger:25,sanity:-10,perish:g,stack:10,note:"Gives 90 seconds of light",
mode:"shipwrecked"},wormlight_lesser:{name:"Lesser Glowberry",uncookable:!0,health:3,hunger:12.5,sanity:-10,perish:q,stack:40,note:"Gives 22.5 seconds of light",mode:"together"},phlegm:{name:"Phlegm",uncookable:!0,health:0,hunger:12.5,sanity:-15,perish:q,stack:40,mode:"together"}},ua=function(){return this.op+this.qty},va={"=":function(a){return a===this.qty},">":function(a){return a>this.qty},"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},
ca={test:function(a){return!!a},toString:function(){return""}},m=function(a,d){return{op:a,qty:d,test:va[a],toString:ua}},wa=function(a,d,b){return this.item1.test(a,d,b)&&this.item2.test(a,d,b)},xa=function(){return this.item1+" and "+this.item2},ya=function(a,d,b){return this.item1.test(a,d,b)||this.item2.test(a,d,b)},za=function(){return this.item1+" or "+this.item2},H=function(a,d){return{item1:a,item2:d,test:ya,toString:za,cancel:a.cancel||d.cancel}},Aa=function(a,d,b){return!this.item.test(a,
d,b)},Ba=function(){return this.item.toString().substring(0,this.item.toString().length-1)+"|strike]"},n=function(a){return{item:a,test:Aa,toString:Ba,cancel:!0}},Ca=function(a,d,b){return(d[this.name]||0)+(d[this.name+"_cooked"]||0)},Da=function(){return"[*"+l[this.name].name+"|"+l[this.name].img+" "+l[this.name].name+"]"+(l[this.name].cook?"[*"+l[this.name].cook.name+"|"+l[this.name].cook.img+"]":"")+(l[this.name].raw?"[*"+l[this.name].raw.name+"|"+l[this.name].raw.img+"]":"")+(this.qty?this.qty:
"")},B=function(a,d){return{name:a,qty:d||ca,test:Ca,toString:Da}},Ea=function(a,d,b){return d[this.name]},Fa=function(){return"[*"+l[this.name].name+"|"+l[this.name].img+" "+l[this.name].name+"]"+(this.qty?this.qty:"")},t=function(a,d){return{name:a,qty:d||ca,test:Ea,toString:Fa}},Ga=function(a,d,b){return b[this.tag]},Ha=function(){return"[tag:"+this.tag+"|"+this.tag+"]"+(this.qty?this.qty:"")},e=function(a,d){return{tag:a,qty:d||ca,test:Ga,toString:Ha}},h={butterflymuffin:{name:"Butter Muffin",
test:function(a,d,b){return d.butterflywings&&!b.meat&&b.veggie},requires:"Butterfly Wings, veggie",requirements:[B("butterflywings"),n(e("meat")),e("veggie")],priority:1,weight:1,foodtype:"veggie",health:20,hunger:37.5,perish:u,sanity:5,cooktime:2},frogglebunwich:{name:"Froggle Bunwich",test:function(a,d,b){return(d.froglegs||d.froglegs_cooked)&&b.veggie},requirements:[B("froglegs"),e("veggie")],priority:1,foodtype:"meat",health:20,hunger:37.5,perish:u,sanity:5,cooktime:2},taffy:{name:"Taffy",test:function(a,
d,b){return b.sweetener&&3<=b.sweetener&&!b.meat},requirements:[e("sweetener",m(">=",3)),n(e("meat"))],priority:10,foodtype:"veggie",health:-3,hunger:25,perish:u,sanity:15,cooktime:2,tags:["honeyed"]},pumpkincookie:{name:"Pumpkin Cookie",test:function(a,d,b){return(d.pumpkin||d.pumpkin_cooked)&&b.sweetener&&2<=b.sweetener},requirements:[B("pumpkin"),e("sweetener",m(">=",2))],priority:10,foodtype:"veggie",health:0,hunger:37.5,perish:g,sanity:15,cooktime:2,tags:["honeyed"]},stuffedeggplant:{name:"Stuffed Eggplant",
test:function(a,d,b){return(d.eggplant||d.eggplant_cooked)&&b.veggie&&1<b.veggie},requirements:[B("eggplant"),e("veggie",m(">",1))],priority:1,foodtype:"veggie",health:3,hunger:37.5,perish:u,sanity:5,temperature:40,temperatureduration:5,cooktime:2},fishsticks:{name:"Fishsticks",test:function(a,d,b){return b.fish&&d.twigs&&b.inedible&&1>=b.inedible},requirements:[e("fish"),t("twigs"),e("inedible"),e("inedible",m("<=",1))],priority:10,foodtype:"meat",health:40,hunger:37.5,perish:g,sanity:5,cooktime:2},
honeynuggets:{name:"Honey Nuggets",test:function(a,d,b){return d.honey&&b.meat&&1.5>=b.meat&&!b.inedible},requirements:[t("honey"),e("meat",m("<=",1.5)),n(e("inedible"))],priority:2,foodtype:"meat",health:20,hunger:37.5,perish:u,sanity:5,cooktime:2,tags:["honeyed"]},honeyham:{name:"Honey Ham",test:function(a,d,b){return d.honey&&b.meat&&1.5<b.meat&&!b.inedible},requirements:[t("honey"),e("meat",m(">",1.5)),n(e("inedible"))],priority:2,foodtype:"meat",health:30,hunger:75,perish:u,sanity:5,temperature:40,
temperatureduration:10,cooktime:2,tags:["honeyed"]},dragonpie:{name:"Dragonpie",test:function(a,d,b){return(d.dragonfruit||d.dragonfruit_cooked)&&!b.meat},requirements:[B("dragonfruit"),n(e("meat"))],priority:1,foodtype:"veggie",health:40,hunger:75,perish:u,sanity:5,temperature:40,temperatureduration:10,cooktime:2},kabobs:{name:"Kabobs",test:function(a,d,b){return b.meat&&d.twigs&&(!b.monster||1>=b.monster)&&b.inedible&&1>=b.inedible},requirements:[e("meat"),t("twigs"),H(n(e("monster")),e("monster",
m("<=",1))),e("inedible"),e("inedible",m("<=",1))],priority:5,foodtype:"meat",health:3,hunger:37.5,perish:u,sanity:5,cooktime:2},mandrakesoup:{name:"Mandrake Soup",test:function(a,d,b){return d.mandrake},requirements:[t("mandrake")],priority:10,foodtype:"veggie",health:100,hunger:150,perish:k,sanity:5,cooktime:3},baconeggs:{name:"Bacon and Eggs",test:function(a,d,b){return b.egg&&1<b.egg&&b.meat&&1<b.meat&&!b.veggie},requirements:[e("egg",m(">",1)),e("meat",m(">",1)),n(e("veggie"))],priority:10,foodtype:"meat",
health:20,hunger:75,perish:D,sanity:5,cooktime:2},meatballs:{name:"Meatballs",test:function(a,d,b){return b.meat&&!b.inedible},requirements:[e("meat"),n(e("inedible"))],priority:-1,foodtype:"meat",health:3,hunger:62.5,perish:g,sanity:5,cooktime:.75},bonestew:{name:"Meaty Stew",test:function(a,d,b){return b.meat&&3<=b.meat&&!b.inedible},requirements:[e("meat",m(">=",3)),n(e("inedible"))],priority:0,foodtype:"meat",health:12,hunger:150,perish:g,sanity:5,temperature:40,temperatureduration:15,cooktime:.75},
perogies:{name:"Pierogi",test:function(a,d,b){return b.egg&&b.meat&&b.veggie&&!b.inedible},requirements:[e("egg"),e("meat"),e("veggie"),n(e("inedible"))],priority:5,foodtype:"meat",health:40,hunger:37.5,perish:D,sanity:5,temperature:40,temperatureduration:10,cooktime:1},turkeydinner:{name:"Turkey Dinner",test:function(a,d,b){return d.drumstick&&1<d.drumstick&&b.meat&&1<b.meat&&(b.veggie||b.fruit)},requirements:[t("drumstick",m(">",1)),e("meat",m(">",1)),H(e("veggie"),e("fruit"))],priority:10,foodtype:"meat",
health:20,hunger:75,perish:k,sanity:5,temperature:40,temperatureduration:10,cooktime:3},ratatouille:{name:"Ratatouille",test:function(a,d,b){return!b.meat&&b.veggie&&!b.inedible},requirements:[n(e("meat")),e("veggie"),n(e("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:25,perish:u,sanity:5,temperature:-40,temperatureduration:5,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,d,b){return b.fruit&&!b.meat&&!b.veggie&&!b.inedible},requirements:[e("fruit"),n(e("meat")),n(e("veggie")),
n(e("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:37.5,perish:u,sanity:5,cooktime:.5},fruitmedley:{name:"Fruit Medley",test:function(a,d,b){return b.fruit&&3<=b.fruit&&!b.meat&&!b.veggie},requirements:[e("fruit",m(">=",3)),n(e("meat")),n(e("veggie"))],priority:0,foodtype:"veggie",health:20,hunger:25,perish:k,sanity:5,temperature:-40,temperatureduration:5,cooktime:.5},fishtacos:{name:"Fish Tacos",test:function(a,d,b){return b.fish&&(d.corn||d.corn_cooked)},requirements:[e("fish"),B("corn")],
priority:10,foodtype:"meat",health:20,hunger:37.5,perish:k,sanity:5,cooktime:.5,tags:["monstermeat"]},waffles:{name:"Waffles",test:function(a,d,b){return d.butter&&(d.berries||d.berries_cooked)&&b.egg},requirements:[t("butter"),B("berries"),e("egg")],priority:10,foodtype:"veggie",health:60,hunger:37.5,perish:k,sanity:5,cooktime:.5},monsterlasagna:{name:"Monster Lasagna",test:function(a,d,b){return b.monster&&2<=b.monster&&!b.inedible},requirements:[e("monster",m(">=",2)),n(e("inedible"))],priority:10,
foodtype:"meat",health:-20,hunger:37.5,perish:k,sanity:-20,cooktime:.5},powcake:{name:"Powdercake",test:function(a,d,b){return d.twigs&&d.honey&&(d.corn||d.corn_cooked)},requirements:[t("twigs"),t("honey"),B("corn")],priority:10,foodtype:"veggie",health:-3,hunger:0,perish:9E6,sanity:0,cooktime:.5,tags:["honeyed"]},unagi:{name:"Unagi",test:function(a,d,b){return d.cutlichen&&(d.eel||d.eel_cooked)},requirements:[t("cutlichen"),B("eel")],priority:20,foodtype:"veggie",health:20,hunger:18.75,perish:g,
sanity:5,cooktime:.5},wetgoop:{name:"Wet Goop",test:function(a,d,b){return!0},requirements:[],trash:!0,priority:-2,health:0,hunger:0,perish:k,sanity:0,cooktime:.25},flowersalad:{name:"Flower Salad",test:function(a,d,b){return d.cactusflower&&b.veggie&&2<=b.veggie&&!b.meat&&!b.inedible&&!b.egg&&!b.sweetener&&!b.fruit},requirements:[t("cactusflower"),e("veggie",m(">=",2)),n(e("meat")),n(e("inedible")),n(e("egg")),n(e("sweetener")),n(e("fruit"))],priority:10,foodtype:"veggie",health:40,hunger:12.5,perish:k,
sanity:5,cooktime:.5,mode:"giants"},icecream:{name:"Ice Cream",test:function(a,d,b){return b.frozen&&b.dairy&&b.sweetener&&!b.meat&&!b.veggie&&!b.inedible&&!b.egg},requirements:[e("frozen"),e("dairy"),e("sweetener"),n(e("meat")),n(e("veggie")),n(e("inedible")),n(e("egg"))],priority:10,foodtype:"veggie",health:0,hunger:25,perish:q,sanity:50,temperature:-40,temperatureduration:15,cooktime:.5,mode:"giants"},watermelonicle:{name:"Melonsicle",test:function(a,d,b){return d.watermelon&&b.frozen&&d.twigs&&
!b.meat&&!b.veggie&&!b.egg},requirements:[t("watermelon"),e("frozen"),t("twigs"),n(e("meat")),n(e("veggie")),n(e("egg"))],priority:10,foodtype:"veggie",health:3,hunger:12.5,perish:q,sanity:20,temperature:-40,temperatureduration:10,cooktime:.5,mode:"giants"},trailmix:{name:"Trail Mix",test:function(a,d,b){return d.acorn_cooked&&b.seed&&1<=b.seed&&(d.berries||d.berries_cooked)&&b.fruit&&1<=b.fruit&&!b.meat&&!b.veggie&&!b.egg&&!b.dairy},requirements:[t("acorn_cooked"),e("seed",m(">=",1)),B("berries"),
e("fruit",m(">=",1)),n(e("meat")),n(e("veggie")),n(e("egg")),n(e("dairy"))],priority:10,foodtype:"veggie",health:30,hunger:12.5,perish:u,sanity:5,cooktime:.5,mode:"giants"},hotchili:{name:"Spicy Chili",test:function(a,d,b){return b.meat&&b.veggie&&1.5<=b.meat&&1.5<=b.veggie},requirements:[e("meat",m(">=",1.5)),e("veggie",m(">=",1.5))],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:g,sanity:0,temperature:40,temperatureduration:15,cooktime:.5,mode:"giants"},guacamole:{name:"Guacamole",test:function(a,
d,b){return d.mole&&d.cactusmeat&&!b.fruit},requirements:[t("mole"),t("cactusmeat"),n(e("fruit"))],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:g,sanity:0,cooktime:.5,mode:"giants"},californiaroll:{name:"California Roll",test:function(a,d,b){return d.seaweed&&2===d.seaweed&&b.fish&&1<=b.fish},requirements:[t("seaweed",m("=",2)),e("fish",m(">=",1))],priority:20,foodtype:"meat",health:20,hunger:37.5,perish:g,sanity:10,cooktime:.5,mode:"shipwrecked"},seafoodgumbo:{name:"Seafood Gumbo",test:function(a,
d,b){return b.fish&&2<b.fish},requirements:[e("fish",m(">",2))],priority:10,foodtype:"meat",health:40,hunger:37.5,perish:g,sanity:20,cooktime:1,mode:"shipwrecked"},bisque:{name:"Bisque",test:function(a,d,b){return d.limpets&&3===d.limpets&&b.frozen},requirements:[t("limpets",m("=",3)),e("frozen")],priority:30,foodtype:"meat",health:60,hunger:18.75,perish:g,sanity:5,cooktime:1,mode:"shipwrecked"},ceviche:{name:"Ceviche",test:function(a,d,b){return b.fish&&2<=b.fish&&b.frozen},requirements:[e("fish",
m(">=",2)),e("frozen")],priority:20,foodtype:"meat",health:20,hunger:25,perish:g,sanity:5,temperature:-40,temperatureduration:10,cooktime:.5,mode:"shipwrecked"},jellyopop:{name:"Jelly-O Pop",test:function(a,d,b){return b.jellyfish&&b.frozen&&b.inedible},requirements:[e("jellyfish"),e("frozen"),e("inedible")],priority:20,foodtype:"meat",health:20,hunger:12.5,perish:q,sanity:0,temperature:-40,temperatureduration:10,cooktime:.5,mode:"shipwrecked"},bananapop:{name:"Banana Pop",test:function(a,d,b){return d.cavebanana&&
b.frozen&&b.inedible&&!b.meat&&!b.fish},requirements:[t("cavebanana"),e("frozen"),e("inedible"),n(e("meat")),n(e("fish"))],priority:20,foodtype:"veggie",health:20,hunger:12.5,perish:q,sanity:33,temperature:-40,temperatureduration:10,cooktime:.5,mode:"shipwrecked"},lobsterbisque:{name:"Lobster Bisque",test:function(a,d,b){return d.lobster&&b.frozen},requirements:[t("lobster"),e("frozen")],priority:30,foodtype:"meat",health:60,hunger:25,perish:g,sanity:10,cooktime:.5,mode:"shipwrecked"},lobsterdinner:{name:"Lobster Dinner",
test:function(a,d,b){return d.lobster&&d.butter&&!b.meat&&!b.frozen},requirements:[t("lobster"),t("butter"),n(e("meat")),n(e("frozen"))],priority:25,foodtype:"meat",health:60,hunger:37.5,perish:u,sanity:50,cooktime:1,mode:"shipwrecked"},sharkfinsoup:{name:"Shark Fin Soup",test:function(a,d,b){return d.shark_fin},requirements:[t("shark_fin")],priority:20,foodtype:"meat",health:40,hunger:12.5,perish:g,sanity:-10,cooktime:1,note:"Gives 10 naughtiness",mode:"shipwrecked"},surfnturf:{name:"Surf 'n' Turf",
test:function(a,d,b){return b.meat&&2.5<=b.meat&&b.fish&&1.5<=b.fish&&!b.frozen},requirements:[e("meat",m(">=",2.5)),e("fish",m(">=",1.5)),n(e("frozen"))],priority:30,foodtype:"meat",health:60,hunger:37.5,perish:g,sanity:33,cooktime:1,mode:"shipwrecked"},coffee:{name:"Coffee",test:function(a,d,b){return d.coffeebeans_cooked&&(4===d.coffeebeans_cooked||3===d.coffeebeans_cooked&&(b.dairy||b.sweetener))},requirements:[H(t("coffeebeans_cooked",m("=",4)),function(a,d){return{item1:a,item2:d,test:wa,toString:xa,
cancel:a.cancel&&d.cancel}}(t("coffeebeans_cooked",m("=",3)),H(e("dairy"),e("sweetener"))))],priority:30,foodtype:"veggie",health:3,hunger:9.375,perish:g,sanity:-5,cooktime:.5,note:"Gives 5 bonus speed (+83%) for 0.5 days",mode:"shipwrecked"},sweetpotatosouffle:{name:"Sweet Potato Souffle",test:function(a,d,b){return d.sweet_potato&&2===d.sweet_potato&&b.egg&&2<=b.egg},requirements:[t("sweet_potato",m("=",2)),e("egg",m(">=",2))],priority:30,foodtype:"veggie",health:20,hunger:37.5,perish:g,sanity:15,
cooktime:2,mode:"warly"},monstertartare:{name:"Monster Tartare",test:function(a,d,b){return b.monster&&2<=b.monster&&b.egg&&b.veggie},requirements:[e("monster",m(">=",2)),e("egg"),e("veggie")],priority:30,foodtype:"meat",health:3,hunger:37.5,perish:g,sanity:10,cooktime:2,mode:"warly"},freshfruitcrepes:{name:"Fresh Fruit Crepes",test:function(a,d,b){return b.monster&&2<=b.monster&&b.egg&&b.veggie},requirements:[e("fruit",m(">=",1.5)),t("butter"),t("honey")],priority:30,foodtype:"veggie",health:60,
hunger:150,perish:g,sanity:15,cooktime:2,mode:"warly"},musselbouillabaise:{name:"Mussel Bouillabaise",test:function(a,d,b){return d.mussel&&2===d.mussel&&b.veggie&&2<=b.veggie},requirements:[t("mussel",m("=",2)),e("veggie",m(">=",2))],priority:30,foodtype:"meat",health:20,hunger:37.5,perish:g,sanity:15,cooktime:2,mode:"warly"}},O=function(){var a,d,b=/^tag[: ]/,c=/^tag:? */,e=/^tagnot[: ]/,C=/^tagnot:? */,p,g=/^recipe[: ]/,k=/^recipe:? */,f,n=/^ingredient[: ]/,Ia=/^ingredient:? */,T,ka,m=!1,A=function(b){!m&&
b.uncookable||0===(b.modeMask&z)?b.match=0:0===b.lowerName.indexOf(a)||b.raw&&0===b.raw.lowerName.indexOf(a)?b.match=3:0===ka.test(b.lowerName)?b.match=2:T.test(b.lowerName)?b.match=1:b.match=0;return b.match},r=function(a){return a.match=a[d]+0||0},t=function(a){for(var b=0,d,c=!0;b<p.length;){d=p[b].test(null,a.nameObject,a);if(p[b].cancel){if(!d){c=!0;break}}else d&&(c=!1);b++}return a.match=c?0:1},v=function(a){for(var b=0,d,c=!0;b<a.requirements.length;){d=a.requirements[b].test(null,f.nameObject,
f);if(a.requirements[b].cancel){if(!d){c=!0;break}}else d&&(c=!1);b++}return a.match=c?0:1},q=function(b){return b.match=b.lowerName===a?1:0},E=function(b){return b.match=b.lowerName===a||b.raw&&b.raw.lowerName===a||b.cook&&b.cook.lowerName===a?1:0},u=function(a,b){var d,c;return a.match===b.match?(d=a.basename?a.basename:a.name,c=b.basename?b.basename:b.name,d!==c?d>c?1:d<c?-1:0:a.name===b.name?0:a.raw===b?1:-1):b.match-a.match};return function(y,w,G){m=!!G;a=w.toLowerCase();if(b.test(a))return d=
a.split(c)[1],y.filter(r).sort(u);if(e.test(a))return d=a.split(C)[1],y.filter(function(a){return!r(a)}).sort(u);if(g.test(a))return(p=h.byName(a.split(k)[1].toLowerCase()))?(p=p.requirements,y.filter(t).sort(u)):[];if(n.test(a))return(f=l.byName(a.split(Ia)[1].toLowerCase()))?y.filter(v).sort(u):[];if(0===a.indexOf("*"))return a=a.substring(1),y.filter(q).sort(u);if(0===a.indexOf("~"))return a=a.substring(1),y.filter(E).sort(u);ka=new RegExp("\\b"+a+".*");T=new RegExp("\\b"+a.split("").join(".*")+
".*");return y.filter(A).sort(u)}}(),da=function(a,d,b){var c,e,C;for(c=0;c<a.length;c++)if(C=a[c],null!==C)for(e in d[C.id]=1+(d[C.id]||0),C)if(C.hasOwnProperty(e)&&"perish"!==e&&!isNaN(C[e])){var p=C[e];qa[e]?p*=F[C.preparationType]:ra[e]&&(p*=F[C[e+"Type"]]);b[e]=p+(b[e]||0)}else"perish"===e&&(b[e]=Math.min(b[e]||D,C[e]))},la=function(){var a,d;return function(b,c,e,C){var p,g;b.length=0;a={};d={};da(c,a,d);d.hunger=d.bestHunger;d.health=d.bestHealth;d.sanity=d.bestSanity;c=0;a:for(;c<h.length;c++)if(g=
!1,0!==(h[c].modeMask&z)){for(p=0;p<h[c].requirements.length;p++)if(h[c].requirements[p].test(null,a,d))h[c].requirements[p].cancel||(g=!0);else if(!C&&h[c].requirements[p].cancel)continue a;else if(C&&!h[c].requirements[p].cancel)continue a;!g||e&&-1!==e.indexOf(h[c])||b.push(h[c])}d.img="";d.name="Combined";return b}}(),Ja=function(){var a=[],d,b;return function(c){a.length=0;d={};b={};da(c,d,b);b.hunger=b.bestHunger;b.health=b.bestHealth;b.sanity=b.bestSanity;for(c=0;c<h.length;c++)h[c].test(null,
d,b)&&0!==(h[c].modeMask&z)&&a.push(h[c]);a.sort(function(a,b){return b.priority-a.priority});b.img="";b.name="Combined";b.priority=" ";b.perish=0;b.cooktime=0;a.unshift(b);return a}}(),N=function(){var a=document.createElement("canvas"),d=a.getContext&&a.toDataURL&&a.getContext("2d"),b=document.createElement("canvas"),c=b.getContext&&b.getContext("2d"),e={},g={},p=!!d,k=[],h=function(h){var f=function(h,f){d.clearRect(0,0,64,64);d.drawImage(f,0,0,64,64);c.clearRect(0,0,32,32);c.drawImage(f,0,0,32,
32);try{e[h]=a.toDataURL(),g[h]=b.toDataURL()}catch(T){p=!1}k.filter(function(a){return a.url===h}).forEach(function(a){a.url===h&&(delete a.img.dataset.pending,U&&a.img.removeAttribute("data-pending"),a.img.src=32===a.d?g[h]||h:e[h]||h)});k=k.filter(function(a){return a.url!==h})};return function(a){f(h,a.target)}},f=function(a,b,d){a.dataset.pending=b;U&&a.setAttribute("data-pending",b);k.push({url:b,img:a,d:d})},l=function(a,b){var d=new Image,c;p?e[a]?d.src=32===b?g[a]:e[a]:(null!==e[a]&&(e[a]=
null,c=new Image,c.addEventListener("load",h(a),!1),c.src=a),f(d,a,b)):d.src=a;return d};a.width=64;a.height=64;b.width=32;b.height=32;l.queue=f;return l}(),ea=function(){var a=/\[([^\|]*)\|([^\|\]]*)\|?([^\|\]]*)\]/,d=/([^\|]\]\[[^\|]+\|[^\|\]]+)\|?([^\|\](?:left)]*)(?=\])/g,b=/(\[[^\|]+\|[^\|\]]+)\|?([^\|\]]*)(?=\]\[)(?!\]\[\|)/g,c=function(a,b,d){return b+"|"+(0===d.length?"left":d+" left")},e=function(a,b,d){return b+"|"+(0===d.length?"right":d+" right")},g=/_(\w)/g,p=function(a,b){return" "+
b.toUpperCase()};return function(h){var k=h&&h.replace(d,c).replace(d,c).replace(b,e);h=k&&k.split(a);var f,l,m,T;if(h&&1!==h.length)for(k=document.createDocumentFragment(),k.appendChild(document.createTextNode(h[0])),f=1;f<h.length;f+=4)""===h[f]&&""===h[f+1]?k.appendChild(document.createElement("br")):(l=document.createElement("span"),l.className=""===h[f+2]?"link":"link "+h[f+2],l.dataset.link=h[f],U&&l.setAttribute("data-link",h[f]),h[f+1]&&0===h[f+1].indexOf("img/")?(l.appendChild(document.createTextNode(h[f+
1].split(" ").slice(1).join(" "))),m=h[f+1].split(" ")[0],T=N(m,32),T.title=(m.substr(4,1).toUpperCase()+m.substr(5).replace(g,p)).split(".")[0],l.appendChild(T)):l.appendChild(document.createTextNode(h[f+1]?h[f+1]:h[f])),k.appendChild(l)),k.appendChild(document.createTextNode(h[f+3]));return k}}(),f,q=0,ma=document.getElementById("main"),Ka=document.getElementById("food"),La=document.getElementById("recipes"),fa=document.getElementById("navbar"),U=!1;document.documentElement.dataset||(U=!0,Object.defineProperty(Element.prototype,
"dataset",{get:function(){this.ds||(this.ds={},Array.prototype.forEach.call(this.attributes,function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));document.getElementById("stalehealth").appendChild(document.createTextNode(Math.round(333)/10+"%"));document.getElementById("stalehunger").appendChild(document.createTextNode(Math.round(667)/10+"%"));document.getElementById("spoiledhunger").appendChild(document.createTextNode(Math.round(500)/10+"%"));
document.getElementById("spoiledsanity").appendChild(document.createTextNode(10));document.getElementById("perishground").appendChild(document.createTextNode(Math.round(1500)/10+"%"));document.getElementById("perishwinter").appendChild(document.createTextNode(Math.round(750)/10+"%"));document.getElementById("perishsummer").appendChild(document.createTextNode(Math.round(1250)/10+"%"));document.getElementById("perishfridge").appendChild(document.createTextNode(Math.round(500)/10+"%"));k=function(a,
d){return"[tag:"+a+"|"+(d||a)+"]"};for(f in l)if(l.hasOwnProperty(f)){var c=l[f];c.match=0;c.lowerName=c.name.toLowerCase();c.id=f;c.nameObject={};c.nameObject[f]=1;c.img="img/"+c.name.replace(/ /g,"_").replace(/'/g,"").toLowerCase()+".png";c.preparationType=c.preparationType||"raw";l[f+"_cooked"]&&(c.cook=l[f+"_cooked"]);"string"===typeof c.cook&&(c.cook=l[c.cook]);c.cook&&!c.cook.raw&&(c.cook.raw=c,c.cook.cooked=!0,c.cook.basename||(c.cook.basename=(c.basename||c.name)+"."));"string"===typeof c.raw&&
(c.raw=l[c.raw],c.cooked=!0,c.basename||(c.basename=(c.raw.basename||c.raw.name)+"."));"string"===typeof c.dry&&(c.dry=l[c.dry]);c.dry&&!c.dry.wet&&(c.dry.wet=c,c.dry.rackdried=!0,c.dry.basename||(c.dry.basename=(c.basename||c.name)+".."));"string"===typeof c.wet&&(c.rackdried=!0,c.wet=l[c.wet],c.basename||(c.basename=(c.wet.basename||c.wet.name)+".."));c.cook&&(c.cook.preparationType="cooked");c.dry&&(c.dry.preparationType="dried");for(f=0;f<I.length;f++)g=I[f],u=c[g]||0,m=c.preparationType,c.raw&&
(u=Math.max(c.raw[g]||0,u),u===c.raw[g]&&(m="raw")),c.cook&&(u=Math.max(c.cook[g]||0,u),u===c.cook[g]&&(m="cooked")),g=g.charAt(0).toUpperCase()+g.slice(1),c["best"+g]=u,c["best"+g+"Type"]=m;c.info=[];g=c.info;c.fruit&&g.push(k("fruit")+(1===c.fruit?"":"\u00d7"+c.fruit));c.veggie&&g.push(k("veggie","vegetable")+(1===c.veggie?"":"\u00d7"+c.veggie));c.meat&&g.push(k("meat")+(1===c.meat?"":"\u00d7"+c.meat));c.egg&&g.push(k("egg")+(1===c.egg?"":"\u00d7"+c.egg));c.fish&&g.push(k("fish")+(1===c.fish?"":
"\u00d7"+c.fish));c.magic&&g.push(k("magic"));c.decoration&&g.push(k("decoration"));c.inedible&&g.push(k("inedible"));c.monster&&g.push(k("monster","monster food"));c.sweetener&&g.push(k("sweetener"));c.fat&&g.push(k("fat"));c.dairy&&g.push(k("dairy"));c.comment&&g.push(c.comment);l[q++]=c}l.length=q;q=0;for(f in h)h.hasOwnProperty(f)&&(h[f].match=0,h[f].name=h[f].name||f,h[f].id=f,h[f].lowerName=h[f].name.toLowerCase(),h[f].weight=h[f].weight||1,h[f].priority=h[f].priority||0,h[f].img="img/"+h[f].name.replace(/ /g,
"_").replace(/'/g,"").toLowerCase()+".png",h[f].requirements&&(h[f].requires=ea(h[f].requirements.join("; ")+(h[f].mode?"; [tag:"+h[f].mode+"|img/"+x[h[f].mode].img+"]":""))),h[f].mode?h[f][h[f].mode]=!0:(h[f].vanilla=!0,h[f].mode="vanilla"),h[f].modeMask=x[h[f].mode].bit,h[f].temperature&&(h[f].note=h[f].note?h[f].note+"; ":"",h[f].note+="Provides "+h[f].temperature+" heat for "+h[f].temperatureduration+" seconds"),h[f].preparationType="recipe",h[q++]=h[f]);h.length=q;h.forEach=Array.prototype.forEach;
h.filter=Array.prototype.filter;h.sort=Array.prototype.sort;h.byName=function(a){for(var d=this.length;d--;)if(this[d].lowerName===a)return this[d]};var I=function(a,d){return a+"[recipe:"+d.name+"|"+d.img+"]"},ga=function(a,d,b){return 1===d?a:a+(b||"s")};for(f=0;f<l.length;f++)c=l[f],g=c.info,c.cooked&&g.push("from [*"+c.raw.name+"|"+c.raw.img+"]"),c.cook&&(c.cook instanceof Object||(c.cook=l[c.cook]),g.push("cook: [*"+c.cook.name+"|"+c.cook.img+"]")),c.dry&&(c.dry instanceof Object||(c.dry=l[c.dry]),
g.push("dry in "+c.drytime/r+" "+ga("day",c.drytime/r)+": [*"+c.dry.name+"|"+c.dry.img+"]")),c.mode?(c[c.mode]=!0,g.push("requires [tag:"+c.mode+"|img/"+x[c.mode].img+"]")):(c.vanilla=!0,c.mode="vanilla"),c.modeMask=x[c.mode].bit,c.info=g.join("; "),c.uncookable?c.info+=(c.info?"[|]":"")+"cannot be added to crock pot":(c.recipes=[],h.forEach(function(a){for(var d=!1,b=a.requirements,e=b.length;e--;)if(b[e].test(null,c.nameObject,c))b[e].cancel||d||(d=!0);else if(b[e].cancel){d=!1;break}d&&c.recipes.push(a)}),
0<c.recipes.length&&(c.ingredient=!0,c.info+=c.recipes.reduce(I,"[|][ingredient:"+c.name+"|Recipes] "))),c.note&&(c.info+="[|]"+c.note),c.info=ea(c.info);l.forEach=Array.prototype.forEach;l.filter=Array.prototype.filter;l.sort=Array.prototype.sort;l.byName=function(a){for(var d=this.length;d--;)if(this[d].lowerName===a)return this[d]};var Ma=function(a,d,b){var c=b||[0,0,0,0],e,h=0,p=0;return function(b){for(var g;b--&&1<=a;){d(c);c[0]++;for(g=0;c[g]>=a;)g++,c[g]++;e=4;for(h=0;e--;)c[e]>=a?c[e]=h:
c[e]>h&&(h=c[e]);if(4===g)return!1;p++}return!0}};R=K=void 0;K=h.filter(function(a){return!a.trash}).sort(function(a,d){return d.priority-a.priority});R=K.map(function(a){return a.test});K.map(function(a){return a.test.toString()});K.map(function(a){return a.priority});var Na=function(a,d,b,c){var e=R.length,h=[],p=0,g,f=60,k=function(b){return a[b]},l=Ma(a.length,function(a){a=a.map(k);var b,d=null,c={},p={},g=null,f=!1,ta=R,l=K;da(a,c,p);p.hunger=p.bestHunger;p.health=p.bestHealth;p.sanity=p.bestSanity;
for(b=0;b<e&&(null===d||l[b].priority>=d);b++)ta[b](null,c,p)&&(null!==g&&(f=!0,g.multiple=!0),g={recipe:l[b],ingredients:a,tags:{health:p.health,hunger:p.hunger},multiple:f},h.push(g),d=l[b].priority)}),m=function(){var a=!1,e=Date.now();for(l(f)?setTimeout(m,0):a=!0;p<h.length&&h[p];p++)d(h[p]);g!==Date.now()-e&&(g=Date.now()-e+1,f=38/g*f+1|0);b&&b();a&&c&&c()};m()},P;(function(){var a=fa.getElementsByTagName("li"),d={},b={},c,e,h=function(a){P(a.target.dataset.tab)},p;P=function(a){e.className=
"";e=d[a];c.style.display="none";c=b[a];e.className="selected";c.style.display="block"};for(f=0;f<a.length;f++)p=a[f],p.dataset.tab&&(d[p.dataset.tab]=p,b[p.dataset.tab]=document.getElementById(p.dataset.tab),b[p.dataset.tab].style.display="none",p.addEventListener("selectstart",function(a){a.preventDefault()},!1),p.addEventListener("click",h,!1));e=d.simulator;c=b.simulator;window.localStorage&&localStorage.foodGuideState&&(a=JSON.parse(localStorage.foodGuideState),a.activeTab&&d[a.activeTab]&&(e=
d[a.activeTab],c=b[a.activeTab],z=a.modeMask||x.shipwrecked.mask));e.className="selected";c.style.display="block";window.addEventListener("beforeunload",function(){var a;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.activeTab=e.dataset.tab,a.modeMask=z,localStorage.foodGuideState=JSON.stringify(a))})})();var Oa=function(a){a.dataset.pending&&N.queue(a,a.dataset.pending,32)},ha=function(a){var d,b,c,e=document.createElement("tr"),
h;for(d=1;d<arguments.length;d++)b=document.createElement(a),h=(c=arguments[d])&&c.indexOf?c:c.toString(),c instanceof DocumentFragment?(b.appendChild(c.cloneNode(!0)),Array.prototype.forEach.call(b.getElementsByTagName("img"),Oa)):0===h.indexOf("img/")?(c=N(h),b.appendChild(c)):b.appendChild(document.createTextNode(h)),e.appendChild(b);return e},V=function(a,d,b,c,e,h,p,g,f,k){var l,m,n,r=!1,u,t,q,w=function(a,d,c){k&&!(q<k)||g&&!g(a)||(d=b(a),p&&p(a,c)&&(d.className="highlighted",u||(u=d),t=d),
l.appendChild(d),q++)},v=function(b,c,p){var g,f;if(c||b&&""!==b.target.dataset.sort||n){g=c||b&&b.target.dataset.sort||n;e&&(f=d.shift());"name"===g?d.sort(function(a,b){var d=a.basename?a.basename:a.name,c=b.basename?b.basename:b.name;return d!==c?d>c?1:d<c?-1:0:a.name===b.name?0:a.raw===b?1:-1}):d.sort(function(a,b){var d=a[g],c=b[g];return isNaN(d)||isNaN(c)?isNaN(d)&&isNaN(c)?0:isNaN(d)?1:-1:c-d});if(c||b)n===g?r=!r:(n=g,r=!1);r&&d.reverse();e&&d.unshift(f)}b=document.createElement("tr");for(m in a)c=
document.createElement("th"),-1===m.indexOf(":")?c.appendChild(document.createTextNode(m)):(c.appendChild(document.createTextNode(m.split(":")[0])),c.title=m.split(":")[1]),a[m]&&(a[m]===n&&(c.style.background=r?"#555":"#ccc",c.style.color=r?"#ccc":"#555",c.style.borderRadius="4px"),c.style.cursor="pointer",c.dataset.sort=a[m],c.addEventListener("click",v,!1)),b.appendChild(c);c=l;l=document.createElement("table");l.appendChild(b);t=u=null;q=0;d.forEach(w);h&&(l.className="links",Array.prototype.forEach.call(l.getElementsByClassName("link"),
function(a){a.addEventListener("click",h,!1)}));c&&c.parentNode.replaceChild(l,c);p&&(u&&u.offsetTop+l.offsetTop+ma.offsetTop+u.offsetHeight>window.scrollY+window.innerHeight?u.scrollIntoView(!0):t&&t.offsetTop+l.offsetTop+ma.offsetTop<window.scrollY&&t.scrollIntoView(!1))};c?v(null,c):v();l.update=function(a){v(null,null,a)};l.setMaxRows=function(a){k=a;this.update()};return l},w=function(a){if(isNaN(a))return"";a=parseFloat(parseFloat(a).toFixed(4));return 0<a?"+"+a:a},na=function(a,d){return a<
d?(d-a)/Math.abs(a):a>d?-(a-d)/Math.abs(a):0},ia=function(a,d){var b=isNaN(a)||a===d?"":" ("+w((100*(a<d?(d-a)/Math.abs(a):a>d?-(a-d)/Math.abs(a):0)).toFixed(0))+"%)";return-1===b.indexOf("Infinity")?b:" ("+w(d-a)+")"},oa=function(a){var d=F[a.preparationType],b=w(a.health*d),c=w(a.hunger*d),d=isNaN(a.sanity)?"":a.sanity*d;if(a.cook){var e=F[a.cook.preparationType];a.cook.health!==(a.health||0)&&(b+=" ("+w(a.cook.health*e-(b||0))+")");a.cook.hunger!==(a.hunger||0)&&(c+=" ("+w(a.cook.hunger*e-(c||
0))+")");a.cook.sanity!==(a.sanity||0)&&(d+=" ("+w(a.cook.sanity*e-(d||0))+")")}return ha("td",a.img?a.img:"",a.name,b,c,d,isNaN(a.perish)?"Never":a.perish/r+" "+ga("day",a.perish/r),a.info||"")},ba=function(a,d,b,c){var e=F[a.preparationType]||1,h=a.health*e,p=a.hunger*e,e=a.sanity*e;return ha("td",a.img?a.img:"",a.name,w(h)+ia(d,h),w(p)+ia(b,p),isNaN(e)?"":w(e)+ia(c,e),isNaN(a.perish)?"Never":a.perish/r+" "+ga("day",a.perish/r),(a.cooktime*sa+.5|0)+" secs",a.priority||"0",a.requires||"",a.note||
"")};(function(){var a,d=[],b=[],c=function(a){return 0!==(a.modeMask&z)},e=V({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",Info:""},Array.prototype.slice.call(l),oa,"name",!1,function(c){c=c.target?"IMG"===c.target.tagName?c.target.parentNode.dataset.link:c.target.dataset.link:c;"recipe:"===c.substring(0,7)||"ingredient:"===c.substring(0,11)?(P("crockpot"),"recipe:"===c.substring(0,7)&&(c="*"+c.substring(7)),b=O(h,c),g.update(!0)):(a!==c?
(a=c,d=O(l,c)):(a="",d.length=0),e.update(!0))},function(a){return-1!==d.indexOf(a)},c),g=V({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":"",Notes:""},Array.prototype.slice.call(h),ba,"name",!1,function(c){c=c.target?"IMG"===c.target.tagName?c.target.parentNode.dataset.link:c.target.dataset.link:
c;var f=c.substring(c.indexOf(":")+1);x[f]?(b=O(h,c),g.update(!0)):(P("foodlist"),a=c,d=O(l,c),e.update(!0))},function(a){return-1!==b.indexOf(a)},c);Ka.appendChild(e);La.appendChild(g);Y.push(function(){e.update();g.update()})})();var Pa=function(a,d){return a+"[ingredient:"+l[d.id].name+"|"+l[d.id].img+"]"},pa=function(a){var d=document.createElement("button");d.appendChild(document.createTextNode("Calculate efficient recipes (may take some time)"));d.className="makablebutton";d.addEventListener("click",
function(){var b=[],c=a?a.length:null,e,g,f=[],k,m,n,r,u,t=[],q=[],Z,A,x,z=function(a){return-1!==q.indexOf(a.id)},v=function(a){return-1!==this.indexOf(l[a])},B=function(a){-1!==q.indexOf(a.target.dataset.id)&&q.splice(q.indexOf(a.target.dataset.id),1);-1!==t.indexOf(a.target.dataset.id)?(t.splice(t.indexOf(a.target.dataset.id),1),a.target.className=""):(t.push(a.target.dataset.id),a.target.className="selected");x.update()},E=function(a){-1!==t.indexOf(a.target.dataset.id)&&t.splice(t.indexOf(a.target.dataset.id),
1);-1!==q.indexOf(a.target.dataset.id)?(q.splice(q.indexOf(a.target.dataset.id),1),a.target.className=""):(q.push(a.target.dataset.id),a.target.className="excluded");x.update();a.preventDefault()},L=[],y=[],D=function(a){g&&(g.className="");for(var b=0;b<y.length;b++)y[b].className="";L.length=0;y.length=0;e===a.target.dataset.recipe?e=g=null:(e=a.target.dataset.recipe,g=a.target,a.target.className="selected");x.update()},G=function(a){g&&(g.className="",e=g=null);var b=y.indexOf(a.target);-1!==b?
(L.splice(b,1),y.splice(b,1),a.target.className=""):(L.push(a.target.dataset.recipe),y.push(a.target),a.target.className="excluded");x.update();a.preventDefault()};null===c&&(c=l.length,a=l);for(;c--;)a[c].skip?!a[c].cook||a[c].cook.uncookable||a[c].cook.skip||-1!==b.indexOf(a[c].cook)?!a[c].dry||a[c].dry.uncookable||a[c].dry.skip||-1!==b.indexOf(a[c].dry)||b.push(a[c].dry):b.push(a[c].cook):a[c].uncookable||a[c].cooked&&!a[c].ideal||a[c].rackdried&&!a[c].ideal||-1!==b.indexOf(a[c])||b.push(a[c]),
!a[c].cooked||a[c].raw.uncookable||a[c].raw.skip||-1!==b.indexOf(a[c].raw)||b.push(a[c].raw),!a[c].rackdried||a[c].wet.uncookable||a[c].wet.skip||-1!==b.indexOf(a[c].wet)||b.push(a[c].wet);Z=[];x=V({"":"",Name:"name",Health:"health","Health+:Health gained compared to ingredients":"healthpls",Hunger:"hunger","Hunger+:Hunger gained compared to ingredients":"hungerpls",Ingredients:""},Z,function(a){var b=a.recipe;return ha("td",b.img?b.img:"",b.name,w(b.health),w(a.healthpls)+" ("+w(100*a.healthpct|
0)+"%)",w(b.hunger),w(a.hungerpls)+" ("+w(100*a.hungerpct|0)+"%)",ea(a.ingredients.reduce(Pa,"")+(a.multiple?"*":"")))},"hungerpls",!1,null,null,function(a){return(!e||a.recipe.name===e)&&(0===L.length||-1===L.indexOf(a.recipe.name))&&(!q.length||!a.ingredients.some(z))&&(!t.length||t.every(v,a.ingredients))},0,15);A=document.createElement("div");m=document.createElement("div");m.appendChild(document.createTextNode("Computing combinations.."));c=document.createElement("div");c.appendChild(document.createTextNode("* combination has multiple possible results"));
A.appendChild(m);k=document.createElement("div");k.className="recipeFilter";A.appendChild(k);n=document.createElement("div");n.className="foodFilter";b.forEach(function(a){var b=N(a.img,32);b.dataset.id=a.id;b.addEventListener("click",B,!1);b.addEventListener("contextmenu",E,!1);b.title=a.name;n.appendChild(b)});A.appendChild(n);r=document.createElement("div");u=document.createElement("input");u.type="text";u.placeholder="use custom filter";u.className="customFilterInput";r.appendChild(u);A.appendChild(x);
d.parentNode.replaceChild(A,d);A.appendChild(c);Na(b,function(a){var b,c;if(-1===f.indexOf(a.recipe.name)){for(b=0;b<f.length&&!(a.recipe.name<f[b]);b++);f.splice(b,0,a.recipe.name);c=N(h.byName(f[b].toLowerCase()).img);c.dataset.recipe=f[b];c.addEventListener("click",D,!1);c.addEventListener("contextmenu",G,!1);c.title=a.recipe.name;b<k.childNodes.length?k.insertBefore(c,k.childNodes[b]):k.appendChild(c)}a.name||(a.name=a.recipe.name,a.health=a.recipe.health,a.ihealth=a.tags.health,a.healthpls=a.recipe.health-
a.ihealth,a.hunger=a.recipe.hunger,a.ihunger=a.tags.hunger,a.hungerpls=a.recipe.hunger-a.ihunger,a.healthpct=na(a.ihealth,a.recipe.health),a.hungerpct=na(a.ihunger,a.recipe.hunger),a.sanity=a.recipe.sanity,a.perish=a.recipe.perish);Z.push(a)},function(){m.firstChild.textContent="Found "+Z.length+" valid recipes.. (you can change Food Guide tabs during this process)"},function(){x.setMaxRows(30);m.firstChild.textContent="Found "+Z.length+" valid recipes. Showing top 30 for selected recipe using all selected ingredients. Right-click to exclude recipes or ingredients."})},
!1);return d};document.getElementById("statistics").appendChild(pa());var Qa=function(a,c){return a.reduce(function(a,e){return Math.max(a,e[c]||0)},-1E5)};window.food=l;window.recipes=h;window.matchingNames=O;var X=function(a,c){if(null!==c)a.dataset.id=c.id;else{if(a.nextSibling&&null!==Q(a.nextSibling)){X(a,Q(a.nextSibling));X(a.nextSibling,null);return}a.dataset.id=null}null!==c?a.firstChild?a.replaceChild(N(c.img),a.firstChild):a.appendChild(N(c.img)):a.firstChild&&a.removeChild(a.firstChild);
a.title=c?c.name:""},Q=function(a){return a&&(l[a.dataset.id]||h[a.dataset.id]||null)};(function(){for(var a=document.getElementsByClassName("ingredientpicker"),c=a.length;c--;)(function(){var b=document.createElement("span"),e,g=document.createElement("div"),f=document.createElement("ul"),k=a[c],m=c,n,t="recipes"===k.dataset.type?h:l,u=!k.dataset.cookable,r=k.nextSibling,q=r.getElementsByClassName("ingredient"),x,w=[],A,z=[],B=[],v=null,D=!1,E=document.getElementById("results"),L=document.getElementById("discoverfood"),
y=document.getElementById("discover"),F=document.getElementById("makable"),G=document.createElement("span"),H=function(a,b){for(var c=a;c.previousSibling;)if(c=c.previousSibling,b(c))return c;return null},K=function(a,b){for(var c=a;c.nextSibling;)if(c=c.nextSibling,b(c))return c;return null},I=!1,M=function(a){var b=l[a]||h[a]||null;if(x){for(a=0;a<q.length;a++)if(null===Q(q[a]))return X(q[a],b),D&&A(),a;return-1}-1===q.indexOf(a)&&(q.push(a),a=document.createElement("span"),a.className="ingredient",
X(a,b),a.addEventListener("click",P,!1),r.appendChild(a),D&&A());return 1},R=function(a){-1!==M(("IMG"===a.target.tagName?a.target.parentNode:a.target).dataset.id)&&a&&a.preventDefault&&a.preventDefault()},S=function(a){var b=N(a.img,32),c=document.createElement("span");c.appendChild(b);c.appendChild(document.createTextNode(a.name));c.dataset.id=a.id;-1!==w.indexOf(a)&&(c.style.opacity=.5);c.addEventListener("mousedown",R,!1);this.appendChild(c);this.dataset.length++},U=function(a){-1!==w.indexOf(l[a.dataset.id])?
a.style.opacity||(a.style.opacity=.5):a.style.opacity&&a.style.removeProperty("opacity")},P=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(x){if(null!==Q(b))return X(b,null),A(),b.dataset.id}else return a=q.indexOf(b.dataset.id),q.splice(a,1),r.removeChild(b),A(),q[a]||null},aa=function(){var a;e.splitTag();a=O(t,e.getSearch(),u);g.removeChild(f);f=document.createElement("div");f.dataset.length=0;a.forEach(S,f);g.appendChild(f);v=null},W=function(a){a="IMG"===a.target.tagName?
a.target.parentNode.dataset.link:a.target.dataset.link;var b=O(t,a,u);1===b.length?M(b[0].id):(k.value=a,aa())},J;"ingredients"===r.id?A=function(){var a,b,c,d,e;w=Array.prototype.map.call(q,function(a){return Q(a)});a=Ja(w);b=a[0].health;c=a[0].hunger;d=a[0].sanity;e=V({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":"",
Notes:""},a,function(a){return ba(a,b,c,d)},"priority",!0,W,function(a,b){return 0<b.length&&a.priority===Qa(b,"priority")});E.firstChild&&E.removeChild(E.firstChild);E.firstChild&&(E.removeChild(E.firstChild),E.removeChild(E.firstChild));E.appendChild(e);null!==w[0]&&(la(z,w,a),0<z.length&&(E.appendChild(document.createTextNode("Add more ingredients to make:")),e=V({"":"",Name:"name","Health:(% more than ingredients)":"health","Hunger:(% more than ingredients)":"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",
"Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":"",Notes:""},z,function(a){return ba(a,b,c,d)},"priority",!1,W),E.appendChild(e)));f&&f.firstChild&&Array.prototype.forEach.call(f.getElementsByTagName("span"),U)}:"inventory"===r.id&&(A=function(){var a;w=Array.prototype.map.call(r.getElementsByClassName("ingredient"),function(a){return Q(a)});L.firstChild&&L.removeChild(L.firstChild);y.firstChild&&
y.removeChild(y.firstChild);F.firstChild&&F.removeChild(F.firstChild);0<w.length&&(a=V({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",Info:""},w,oa,"name"),L.appendChild(a),la(B,w,null,!0),0<B.length&&(a=V({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":"",
Notes:""},B,ba,"name"),y.appendChild(a),F.appendChild(pa(w))));f&&f.firstChild&&Array.prototype.forEach.call(f.getElementsByTagName("span"),U)});0!==q.length?(x=!0,Array.prototype.forEach.call(q,function(a){X(a,null);a.addEventListener("click",P,!1)})):(q=[],x=!1);window.localStorage&&localStorage.foodGuideState&&(n=JSON.parse(localStorage.foodGuideState).pickers)&&n[m]&&n[m].forEach(function(a){l[a]&&M(a)});D=!0;b.className="searchselector retracted";b.appendChild(document.createTextNode("name"));
e=function(){var a=document.createElement("div"),c=!1,d=null,e=[{title:"name",prefix:"",placeholder:"Filter ingredients"},{title:"tag",prefix:"tag:",placeholder:"Meat, veggie, fruit, egg, monster..."},{title:"recipe",prefix:"recipe:",placeholder:"Find ingredients used in a recipe"}],g=e[0],f=null,h=function(){c=!1;a.style.height="0px";b.style.borderBottomLeftRadius="3px";a.style.borderTopLeftRadius="3px";null!==f&&(clearTimeout(f),f=null);b.className="searchselector retracted"},l=function(a){g=a;
k.placeholder=g.placeholder;b.firstChild.textContent=g.title},m=function(a){l(e[a.target.dataset.typeIndex]);aa();h()},n=/: */;b.addEventListener("click",function(){c?h():(null===d&&(a.style.height="auto",a.style.left=b.offsetLeft,a.style.top=b.offsetTop+b.offsetHeight,d=a.offsetHeight+"px",a.style.height="0px"),c=!0,a.style.height=d,b.style.borderBottomLeftRadius="0px",a.style.borderTopLeftRadius="0px",a.style.width="auto",a.style.width=Math.max(a.offsetWidth,b.offsetWidth+1)+"px",null!==f&&(clearTimeout(f),
f=null),b.className="searchselector extended")},!1);b.addEventListener("selectstart",function(a){a.preventDefault()},!1);b.addEventListener("mouseout",function(){null!==f&&clearTimeout(f);f=setTimeout(h,500)},!1);b.addEventListener("mouseover",function(){null!==f&&(clearTimeout(f),f=null)},!1);a.addEventListener("mouseout",function(){null!==f&&clearTimeout(f);f=setTimeout(h,500)},!1);a.addEventListener("mouseover",function(){null!==f&&(clearTimeout(f),f=null)},!1);e.forEach(function(b,c){var d=document.createElement("div");
d.appendChild(document.createTextNode(b.title));d.dataset.typeIndex=c;d.addEventListener("click",m,!1);b.element=d;a.appendChild(d)});k.parentNode.insertBefore(b,k);a.className="searchdropdown";k.parentNode.insertBefore(a,k);return{getTag:function(){return g.title},setSearchType:function(a){l(e[a])},getSearch:function(){return g.prefix+k.value},splitTag:function(){var a;a=k.value.split(n);var b,c;if(2===a.length)for(b=a[0].toLowerCase()+":",c=a[1],a=0;a<e.length;a++)if(b===e[a].prefix){l(e[a]);k.value=
c;break}}}}();g.className="ingredientdropdown";g.appendChild(f);g.addEventListener("mousedown",function(a){a.preventDefault()},!1);(function(){var a=O(t,e.getSearch(),u);g.removeChild(f);f=document.createElement("div");f.dataset.length=0;a.forEach(S,f);g.appendChild(f)})();G.className="clearingredients";G.appendChild(document.createTextNode("clear"));G.addEventListener("click",function(){if(""===k.value&&"name"===e.getTag())for(;Q(r.firstChild);)P({target:r.firstChild});else k.value="",e.setSearchType(0),
aa()},!1);G.addEventListener("mouseover",function(){""===k.value&&"name"===e.getTag()&&(G.firstChild.textContent="clear chosen ingredients")},!1);G.addEventListener("mouseout",function(){"clear"!==G.firstChild.textContent&&(G.firstChild.textContent="clear")},!1);r.parentNode.insertBefore(G,r);r.parentNode.insertBefore(g,r);k.addEventListener("keydown",function(a){var b;-1!==[16,17,37,38,39,40,13].indexOf(a.keyCode)&&(b=v,13===a.keyCode?(null===v&&(v=f.firstChild||null),null!==v&&R({target:v})):null===
v?40===a.keyCode&&(v=f.childNodes[1]||f.firstChild||null,null!==v&&(J=v.offsetLeft+v.offsetWidth/2,a.preventDefault())):(a.preventDefault(),37===a.keyCode?(v=v.previousSibling&&v.previousSibling.offsetTop===v.offsetTop?v.previousSibling:(a=K(v,function(a){return a.offsetTop!==v.offsetTop}))?a.previousSibling:f.lastChild,null!==v&&(J=v.offsetLeft+v.offsetWidth/2)):39===a.keyCode?(v=v.nextSibling&&v.nextSibling.offsetTop===v.offsetTop?v.nextSibling:(a=H(v,function(a){return a.offsetTop!==v.offsetTop}))?
a.nextSibling:f.firstChild,null!==v&&(J=v.offsetLeft+v.offsetWidth/2)):38===a.keyCode?((a=H(v,function(a){return J>=a.offsetLeft-1&&J<=a.offsetLeft+a.offsetWidth+1}))||(a=H(f.lastChild,function(a){return J>=a.offsetLeft-1&&J<=a.offsetLeft+a.offsetWidth+1})),v=a?a:f.firstChild):40===a.keyCode&&((a=K(v,function(a){return J>=a.offsetLeft-1&&J<=a.offsetLeft+a.offsetWidth+1}))||(a=K(f.firstChild,function(a){return J>=a.offsetLeft-1&&J<=a.offsetLeft+a.offsetWidth+1})),v=a?a:f.lastChild)),v!==b&&(null!==
b&&(b.className=""),null!==v&&(v.className="selected")))},!1);k.addEventListener("keyup",function(a){-1===[16,17,37,38,39,40,13].indexOf(a.keyCode)?aa():null!==v&&a.preventDefault()},!1);k.addEventListener("focus",function(){I||(I=!0)},!1);k.addEventListener("blur",function(){I&&(I=!1)},!1);A();window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||(a.pickers=
[]),x?(b=[],b=Array.prototype.map.call(q,function(a){return(a=Q(a))?a.id:null}),a.pickers[m]=b):a.pickers[m]=q,localStorage.foodGuideState=JSON.stringify(a))});Y.push(aa);Y.push(A)})()})();var I=function(a){W(x[a.target.dataset.mode].mask)},q=function(a){W(z^x[a.target.dataset.mode].bit);a.preventDefault()},M=document.createElement("li");fa.insertBefore(M,fa.firstChild);M.className="mode";for(var ja in x)k=N("img/"+x[ja].img),k.dataset.mode=ja,k.addEventListener("click",I,!1),k.addEventListener("contextmenu",
q,!1),k.title=x[ja].name+"\nleft-click to select\nright-click to toggle",M.appendChild(k);W(z)})();
